<?php if (!defined('BASEPATH')) exit('No direct script access allowed');class New_projects_model extends ERP_Model{    function __contruct()    {        parent::__contruct();    }    function get_all_new_projects()    {        $this->db->select('*');        $this->db->from('property');        $this->db->where('category_type_id', 7);        $this->db->order_by('property_id', 'DESC');        $this->db->join('property_types', 'property.property_type_id = property_types.property_type_id', 'LEFT');        $this->db->join('category_types', 'property.category_type_id = category_types.category_id', 'LEFT');        $output = $this->db->get()->result_array();        return $output;    }    function get_all_new_projects_by_agent_id($agent_id)    {        $this->db->select('*');        $this->db->from('property');        $this->db->where('category_type_id', 7);        $this->db->where('agent_id', $agent_id);        $this->db->order_by('property_id', 'DESC');        $this->db->join('property_types', 'property.property_type_id = property_types.property_type_id', 'LEFT');        $this->db->join('category_types', 'property.category_type_id = category_types.category_id', 'LEFT');        $output = $this->db->get()->result_array();        return $output;    }    function get_all_new_projects_units_by_id_and_agent_id($id, $agent_id)    {        $this->db->select('new_projects.*, p.*, category_types.category_name, property_types.property_type_name');        $this->db->from('new_projects');        $this->db->where('new_projects.property_id', $id);        $this->db->where('agent_id', $agent_id);        $this->db->join('property as p', 'p.property_id = new_projects.property_id', 'LEFT');        $this->db->join('category_types', 'p.category_type_id = category_types.category_id', 'LEFT');        $this->db->join('property_types', 'p.property_type_id = property_types.property_type_id', 'LEFT');        $output = $this->db->get()->result_array();        return $output;    }    function get_all_new_projects_units_by_id($id)    {        $this->db->select('new_projects.*, p.*, category_types.category_name, property_types.property_type_name');        $this->db->from('new_projects');        $this->db->where('new_projects.property_id', $id);        $this->db->join('property as p', 'p.property_id = new_projects.property_id', 'LEFT');        $this->db->join('category_types', 'p.category_type_id = category_types.category_id', 'LEFT');        $this->db->join('property_types', 'p.property_type_id = property_types.property_type_id', 'LEFT');        $output = $this->db->get()->result_array();        return $output;    }    public function getjsonnewprojectunitbyid($id)    {        $this->db->select('*');        $this->db->where('id', $id);        $this->db->from('new_projects');        $query = $this->db->get();        $result = $query->result();        if (!empty($result)) {            $this->output->set_output(json_encode($query->result()));        } else {            return NULL;        }    }    function get_all_newprojects()    {        $this->db->select('*');        $this->db->from('new_projects');        $output = $this->db->get()->result_array();        return $output;    }    function get_all_property_types()    {        $this->db->select('*');        $this->db->from('property_types');        $output = $this->db->get()->result_array();        return $output;    }    /*function getsidebarnewprojects()    {        $this->db->select('*');        $this->db->where('position', 'sidebar');        $this->db->from('new_projects');        $query = $this->db->get();        return $query->result();        //$this->output->set_output(json_encode($query->result()));    }*/    public function getjsonnewprojectsbyid($id)    {        $this->db->select('*');        $this->db->where('id', $id);        $this->db->from('new_projects');        $query = $this->db->get();        $this->output->set_output(json_encode($query->result()));    }    public function submit_new_project_unit($data)    {        $this->db->insert('new_projects', $data);    }    public function edit_new_project_unit($id, $data)    {        $this->db->where('id', $id);        $this->db->update('new_projects', $data);    }    public function delete_new_roject_unit($id)    {        $this->db->where('id', $id);        $this->db->delete('new_projects');    }}